<head>
	<title>Delvex is a Noob</title>
</head>

<template name="layout">
	<div class="ui one column page grid">
		{{> menu}}
		{{> instance_menu}}
		{{> jenn}}
		{{> yield}}
	</div>
</template>

<template name="batman">
	{{> loginButtons}}
</template>

<template name="loading">
	{{> spinner}}
</template>

<template name="login">
	<div class="login form">
		<div class="panel">
			<img class="ui flip image" src="login_thok.png">
		</div>

		<form id="submit-login" method="post" class="ui form segment">
			<div class="ui error message">
				<div class="header">Oops</div>
				<p></p>
			</div>

			<div class="field">
				<div class="ui icon input">
					<input type="text" name="username" placeholder="username">
					<i class="user icon"></i>
				</div>
			</div>

			<div class="field">
				<div class="ui icon input">
					<input type="password" name="password" placeholder="password">
					<i class="lock icon"></i>
				</div>
			</div>

			<button class="ui fluid black button" type="submit">Login</button>
		</form>
	</div>
</template>

<template name="menu">
	<div class="menu buttons">
		{{#if user}}
			<a href="/logout">
				<i class="bigger red sign out icon"></i>
			</a>
			{{#if isAdmin}}
				<a href="{{pathFor 'add'}}">
					<i class="bigger black add icon"></i>
				</a>
				<a href="{{pathFor 'remove'}}">
					<i class="bigger black minus icon"></i>
				</a>
			{{/if}}
		{{else}}
			<a href="/login">
				<i class="bigger green sign in icon" ></i>
			</a>
		{{/if}}
	</div>
</template>

<template name="instance_menu">
	<div class="instance menu">
		{{#each instances}}
			<div class="instance">
				<img src="http://images.niftykins.com/roster/{{lastBoss}}.png" />
			</div>
		{{/each}}
	</div>
</template>

<template name="jenn">
	<div class="jenn">
		<a href="http://biscomic.com" target="_blank">
			<i class="big magic icon"></i>
			<span>biscomic.com</span>
		</a>
	</div>
</template>

<template name="roster">
	{{> search}}

	<div class="bosses">
		{{#if this.length}}
			{{#each this}}
				{{#if gridView}}
					{{> boss_mini}}
				{{else}}
					{{#if isAdmin}}
						{{> boss_admin}}
					{{else}}
						{{> boss}}
					{{/if}}
				{{/if}}
			{{/each}}
		{{else}}
			{{#if getFilter}}
				<p class="notfound">{{getFilter}} is not currently in for any bosses</p>
			{{else}}
				{{> spinner}}
			{{/if}}
		{{/if}}
	</div>
</template>

<template name="search">
	<div class="filter">
		<div class="ui huge icon input">
			<input class="typeahead" type="text" placeholder="Search..." value="{{getFilter}}" data-source="names" data-hint="true">
			{{#if getFilter}}
				<i class="close icon" style="cursor: pointer;"></i>
			{{else}}
				<i class="search icon"></i>
			{{/if}}
		</div>

		{{#if getFilter}}
			<div class="view">
				{{#if gridView}}
					<i class="reorder icon"></i>
				{{else}}
					<i class="block layout icon"></i>
				{{/if}}
			</div>

			{{#if countBosses}}
				<div class="counter">
					{{getFilter}} is in for {{pluralize countBosses 'boss'}}
				</div>
			{{/if}}
		{{/if}}
	</div>
</template>

<template name="boss_mini">
	<div name="{{name}}" class="ui segment boss-mini">
		<div class="panel">
			<img class="ui image" src="http://images.niftykins.com/roster/{{name}}.png">
			<h2>{{name}}</h2>
		</div>
	</div>
</template>

<template name="boss_admin">
	<div name="{{name}}" class="ui segment boss grid admin">
		<div class="panel column">
			<img class="ui image" src="http://images.niftykins.com/roster/{{name}}.png">
			<h2>{{name}}</h2>
			{{#if playerCount}}
				<h3>{{playerCount}}</h3>
			{{/if}}

			<div name="{{name}}">
				<div name="melee" class="spot">
					<img src="/melee2.png">
					<i class="triangle large up icon"></i>
					<span>{{spots.melee}}</span>
					<i class="triangle large down icon"></i>
				</div>

				<div name="casters" class="spot">
					<img src="/caster2.png">
					<i class="triangle large up icon"></i>
					<span>{{spots.casters}}</span>
					<i class="triangle large down icon"></i>
				</div>

				<div name="healers" class="spot">
					<img src="/healer2.png">
					<i class="triangle large up icon"></i>
					<span>{{spots.healers}}</span>
					<i class="triangle large down icon"></i>
				</div>

				<div name="tanks" class="spot">
					<img src="/tank2.png">
					<i class="triangle large up icon"></i>
					<span>{{spots.tanks}}</span>
					<i class="triangle large down icon"></i>
				</div>
			</div>
		</div>

		<div class="slots column">
			{{#if melees.length}}
				<div class="role">
					<img class="ui left floated image" src="/melee2.png">
					<div class="melee row">
						{{#each melees}}
							{{> player}}
						{{/each}}
					</div>
					<div class="subs row">
						{{#each subs "melees"}}
							{{> sub}}
						{{/each}}
					</div>
				</div>
			{{/if}}

			{{#if casters.length}}
				<div class="role">
					<img class="ui left floated image" src="/caster2.png">
					<div class="casters row">
						{{#each casters}}
							{{> player}}
						{{/each}}
					</div>
					<div class="subs row">
						{{#each subs "casters"}}
							{{> sub}}
						{{/each}}
					</div>
				</div>
			{{/if}}

			{{#if healers.length}}
				<div class="role">
					<img class="ui left floated image" src="/healer2.png">
					<div class="healers row">
						{{#each healers}}
							{{> player}}
						{{/each}}
					</div>
					<div class="subs row">
						{{#each subs "healers"}}
							{{> sub}}
						{{/each}}
					</div>
				</div>
			{{/if}}

			{{#if tanks.length}}
				<div class="role">
					<img class="ui left floated image" src="/tank2.png">
					<div class="tanks row">
						{{#each tanks}}
							{{> player}}
						{{/each}}
					</div>
					<div class="subs row">
						{{#each subs "tanks"}}
							{{> sub}}
						{{/each}}
					</div>
				</div>
			{{/if}}
		</div>
	</div>
</template>

<template name="boss">
	<div name="{{name}}" class="ui segment boss grid">
		<div class="panel column">
			<img class="ui image" src="http://images.niftykins.com/roster/{{name}}.png">
			<h2>{{name}}</h2>
			{{#if playerCount}}
				<h3>{{playerCount}}</h3>
			{{/if}}
		</div>

		<div class="slots column">
			{{#if melees.length}}
				<img class="ui left floated image" src="/melee2.png">
				<div class="melee row">
					{{#each melees}}
						{{> player}}
					{{/each}}
				</div>
			{{/if}}

			{{#if casters.length}}
				<img class="ui left floated image" src="/caster2.png">
				<div class="casters row">
					{{#each casters}}
						{{> player}}
					{{/each}}
				</div>
			{{/if}}

			{{#if healers.length}}
				<img class="ui left floated image" src="/healer2.png">
				<div class="healers row">
					{{#each healers}}
						{{> player}}
					{{/each}}
				</div>
			{{/if}}

			{{#if tanks.length}}
				<img class="ui left floated image" src="/tank2.png">
				<div class="tanks row">
					{{#each tanks}}
						{{> player}}
					{{/each}}
				</div>
			{{/if}}
		</div>
	</div>
</template>

<template name="player">
	<div name="{{name}}" class="no-select player {{class}} {{#if out}}out{{/if}}">
		{{name}}
	</div>
</template>

<template name="sub">
	<div name="{{name}}" class="no-select player sub {{change}}">
		{{name}}
	</div>
</template>

<template name="remove">
	<div class="remove form">
		<form id="submit-remove" class="ui form segment">
			<div class="ui error message">
				<i class="close icon"></i>
				<div class="header"></div>
				<p class="message"></p>
			</div>

			<div class="field">
				<div class="ui huge icon input">
					<input class="typeahead" type="text" name="name" placeholder="name" data-source="names" data-hint="true">
					<i class="user icon"></i>
				</div>
			</div>

			<button class="ui huge fluid black button" type="submit">Remove Player</button>
		</form>
	</div>
</template>

<template name="add">
	<div class="player form">
		<form id="submit-player" class="ui form segment">
			<div class="ui error message">
				<i class="close icon"></i>
				<div class="header"></div>
				<p class="message"></p>
			</div>

			<div class="field">
				<div class="ui huge icon input">
					<input type="text" name="name" placeholder="name">
					<i class="user icon"></i>
				</div>
			</div>

			<div class="field">
				<div class="ui input">
					<input type="hidden" name="role">
					<div class="roles">
						<div class="row">
							<div value="caster" class="role caster">
								<img src="/caster2.png">
							</div>
							<div value="melee" class="role melee">
								<img src="/melee2.png">
							</div>
							<div value="healer" class="role healer">
								<img src="/healer2.png">
							</div>
							<div value="tank" class="role tank">
								<img src="/tank2.png">
							</div>
						</div>
					</div>
				</div>
			</div>

			<div class="field">
				<div class="ui input">
					<input type="hidden" name="class">
					<div class="classes">
						<div class="row">
							<div value="rogue" class="class rogue"></div>
							<div value="warrior" class="class warrior"></div>
							<div value="druid" class="class druid"></div>
							<div value="dk" class="class dk"></div>
						</div>

						<div class="row">
							<div value="paladin" class="class paladin"></div>
							<div value="priest" class="class priest"></div>
							<div value="warlock" class="class warlock"></div>
							<div value="shaman" class="class shaman"></div>
						</div>

						<div class="row">
							<div value="mage" class="class mage"></div>
							<div value="monk" class="class monk"></div>
							<div value="hunter" class="class hunter"></div>
						</div>
					</div>
				</div>
			</div>

			<button class="ui huge fluid black button" type="submit">Add Player</button>
		</form>
	</div>
</template>
